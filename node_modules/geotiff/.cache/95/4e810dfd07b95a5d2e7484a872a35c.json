{"id":"WRyd","dependencies":[{"name":"/home/travis/build/geotiffjs/geotiff.js/package.json","includedInParent":true,"mtime":1586203732493},{"name":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/package.json","includedInParent":true,"mtime":1586165210060},{"name":"debug","loc":{"line":12,"column":40},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/master/invocation-proxy.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/debug/src/browser.js"},{"name":"observable-fns","loc":{"line":13,"column":33},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/master/invocation-proxy.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/index.js"},{"name":"../common","loc":{"line":14,"column":25},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/master/invocation-proxy.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/common.js"},{"name":"../observable-promise","loc":{"line":15,"column":37},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/master/invocation-proxy.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/observable-promise.js"},{"name":"../transferable","loc":{"line":16,"column":31},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/master/invocation-proxy.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/transferable.js"},{"name":"../types/messages","loc":{"line":17,"column":27},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/master/invocation-proxy.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/threads/dist/types/messages.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0});const r=e(require(\"debug\")),t=require(\"observable-fns\"),s=require(\"../common\"),a=require(\"../observable-promise\"),o=require(\"../transferable\"),n=require(\"../types/messages\"),i=r.default(\"threads:master:messages\");let u=1;const l=e=>Array.from(new Set(e)),d=e=>e&&e.type===n.WorkerMessageType.error,m=e=>e&&e.type===n.WorkerMessageType.result,c=e=>e&&e.type===n.WorkerMessageType.running;function f(e,r){return new t.Observable(t=>{let a;const o=n=>{if(i(\"Message from worker:\",n.data),n.data&&n.data.uid===r)if(c(n.data))a=n.data.resultType;else if(m(n.data))\"promise\"===a?(void 0!==n.data.payload&&t.next(s.deserialize(n.data.payload)),t.complete(),e.removeEventListener(\"message\",o)):(n.data.payload&&t.next(s.deserialize(n.data.payload)),n.data.complete&&(t.complete(),e.removeEventListener(\"message\",o)));else if(d(n.data)){const r=s.deserialize(n.data.error);t.error(r),e.removeEventListener(\"message\",o)}};return e.addEventListener(\"message\",o),()=>e.removeEventListener(\"message\",o)})}function p(e){if(0===e.length)return{args:[],transferables:[]};const r=[],t=[];for(const a of e)o.isTransferDescriptor(a)?(r.push(s.serialize(a.send)),t.push(...a.transferables)):r.push(s.serialize(a));return{args:r,transferables:0===t.length?t:l(t)}}function g(e,r){return(...s)=>{const o=u++,{args:l,transferables:d}=p(s),m={type:n.MasterMessageType.run,uid:o,method:r,args:l};i(\"Sending command to run function to worker:\",m);try{e.postMessage(m,d)}catch(c){return a.ObservablePromise.from(Promise.reject(c))}return a.ObservablePromise.from(t.multicast(f(e,o)))}}function y(e,r){const t={};for(const s of r)t[s]=g(e,s);return t}exports.createProxyFunction=g,exports.createProxyModule=y;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":17}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":19}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":25}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":30}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":47}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":8,"column":0},"generated":{"line":1,"column":56}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":59}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":66}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":69}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":71}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":82}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":84}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":85}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":9,"column":0},"generated":{"line":1,"column":93}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":97}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":104}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":119}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":127}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":140}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":141}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":11,"column":0},"generated":{"line":1,"column":148}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":12,"column":0},"generated":{"line":1,"column":152}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":12,"column":0},"generated":{"line":1,"column":158}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":12,"column":0},"generated":{"line":1,"column":160}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":12,"column":0},"generated":{"line":1,"column":162}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":12,"column":0},"generated":{"line":1,"column":170}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":13,"column":0},"generated":{"line":1,"column":180}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":13,"column":0},"generated":{"line":1,"column":182}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":13,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":14,"column":0},"generated":{"line":1,"column":208}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":14,"column":0},"generated":{"line":1,"column":210}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":14,"column":0},"generated":{"line":1,"column":218}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":15,"column":0},"generated":{"line":1,"column":231}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":15,"column":0},"generated":{"line":1,"column":233}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":15,"column":0},"generated":{"line":1,"column":241}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":16,"column":0},"generated":{"line":1,"column":266}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":16,"column":0},"generated":{"line":1,"column":268}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":16,"column":0},"generated":{"line":1,"column":276}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":17,"column":0},"generated":{"line":1,"column":295}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":17,"column":0},"generated":{"line":1,"column":297}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":17,"column":0},"generated":{"line":1,"column":305}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":18,"column":0},"generated":{"line":1,"column":326}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":18,"column":0},"generated":{"line":1,"column":328}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":18,"column":0},"generated":{"line":1,"column":330}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":18,"column":0},"generated":{"line":1,"column":338}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":19,"column":0},"generated":{"line":1,"column":365}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":19,"column":0},"generated":{"line":1,"column":369}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":19,"column":0},"generated":{"line":1,"column":371}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":373}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":379}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":381}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":384}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":390}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":395}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":399}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":20,"column":0},"generated":{"line":1,"column":403}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":407}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":409}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":412}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":415}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":417}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":424}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":426}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":21,"column":0},"generated":{"line":1,"column":444}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":450}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":452}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":455}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":458}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":460}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":467}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":469}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":22,"column":0},"generated":{"line":1,"column":487}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":494}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":496}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":499}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":502}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":504}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":511}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":513}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":23,"column":0},"generated":{"line":1,"column":531}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":24,"column":0},"generated":{"line":1,"column":539}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":24,"column":0},"generated":{"line":1,"column":548}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":24,"column":0},"generated":{"line":1,"column":550}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":24,"column":0},"generated":{"line":1,"column":552}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":25,"column":0},"generated":{"line":1,"column":555}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":25,"column":0},"generated":{"line":1,"column":562}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":25,"column":0},"generated":{"line":1,"column":566}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":25,"column":0},"generated":{"line":1,"column":568}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":25,"column":0},"generated":{"line":1,"column":579}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":26,"column":0},"generated":{"line":1,"column":583}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":26,"column":0},"generated":{"line":1,"column":587}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":27,"column":0},"generated":{"line":1,"column":589}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":27,"column":0},"generated":{"line":1,"column":595}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":27,"column":0},"generated":{"line":1,"column":597}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":601}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":28,"column":0},"generated":{"line":1,"column":604}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":28,"column":0},"generated":{"line":1,"column":606}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":28,"column":0},"generated":{"line":1,"column":629}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":28,"column":0},"generated":{"line":1,"column":631}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":637}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":639}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":645}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":647}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":652}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":29,"column":0},"generated":{"line":1,"column":658}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":31,"column":0},"generated":{"line":1,"column":660}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":31,"column":0},"generated":{"line":1,"column":663}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":31,"column":0},"generated":{"line":1,"column":665}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":31,"column":0},"generated":{"line":1,"column":667}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":32,"column":0},"generated":{"line":1,"column":673}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":32,"column":0},"generated":{"line":1,"column":675}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":32,"column":0},"generated":{"line":1,"column":677}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":32,"column":0},"generated":{"line":1,"column":682}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":34,"column":0},"generated":{"line":1,"column":698}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":34,"column":0},"generated":{"line":1,"column":701}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":34,"column":0},"generated":{"line":1,"column":703}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":34,"column":0},"generated":{"line":1,"column":705}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":35,"column":0},"generated":{"line":1,"column":711}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":35,"column":0},"generated":{"line":1,"column":723}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":36,"column":0},"generated":{"line":1,"column":731}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":36,"column":0},"generated":{"line":1,"column":735}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":36,"column":0},"generated":{"line":1,"column":737}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":36,"column":0},"generated":{"line":1,"column":742}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":751}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":753}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":758}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":760}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":772}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":774}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":37,"column":0},"generated":{"line":1,"column":779}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":39,"column":0},"generated":{"line":1,"column":789}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":39,"column":0},"generated":{"line":1,"column":791}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":40,"column":0},"generated":{"line":1,"column":802}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":40,"column":0},"generated":{"line":1,"column":804}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":40,"column":0},"generated":{"line":1,"column":824}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":40,"column":0},"generated":{"line":1,"column":834}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":43,"column":0},"generated":{"line":1,"column":839}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":43,"column":0},"generated":{"line":1,"column":841}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":43,"column":0},"generated":{"line":1,"column":846}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":855}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":857}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":862}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":864}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":876}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":878}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":44,"column":0},"generated":{"line":1,"column":883}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":46,"column":0},"generated":{"line":1,"column":893}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":46,"column":0},"generated":{"line":1,"column":895}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":46,"column":0},"generated":{"line":1,"column":900}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":47,"column":0},"generated":{"line":1,"column":911}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":47,"column":0},"generated":{"line":1,"column":913}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":48,"column":0},"generated":{"line":1,"column":924}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":48,"column":0},"generated":{"line":1,"column":926}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":48,"column":0},"generated":{"line":1,"column":946}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":48,"column":0},"generated":{"line":1,"column":956}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":52,"column":0},"generated":{"line":1,"column":966}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":52,"column":0},"generated":{"line":1,"column":969}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":52,"column":0},"generated":{"line":1,"column":971}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":52,"column":0},"generated":{"line":1,"column":973}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":52,"column":0},"generated":{"line":1,"column":979}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":980}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":986}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":988}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":990}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":1002}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":1004}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":53,"column":0},"generated":{"line":1,"column":1009}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1016}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1018}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":58,"column":0},"generated":{"line":1,"column":1024}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1027}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1029}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1049}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":60,"column":0},"generated":{"line":1,"column":1059}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1064}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":63,"column":0},"generated":{"line":1,"column":1071}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":63,"column":0},"generated":{"line":1,"column":1073}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":63,"column":0},"generated":{"line":1,"column":1090}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":63,"column":0},"generated":{"line":1,"column":1100}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1103}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1107}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1109}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1129}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":64,"column":0},"generated":{"line":1,"column":1139}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1144}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1153}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1155}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1158}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1161}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1165}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1167}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1174}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":70,"column":0},"generated":{"line":1,"column":1180}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1181}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":71,"column":0},"generated":{"line":1,"column":1186}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1189}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1203}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1207}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1213}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1215}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1218}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1220}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1223}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1227}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1233}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":77,"column":0},"generated":{"line":1,"column":1238}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":78,"column":0},"generated":{"line":1,"column":1240}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":78,"column":0},"generated":{"line":1,"column":1242}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":78,"column":0},"generated":{"line":1,"column":1263}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1267}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1269}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1274}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1276}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1286}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":79,"column":0},"generated":{"line":1,"column":1288}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1295}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1297}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1305}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1307}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":83,"column":0},"generated":{"line":1,"column":1323}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":83,"column":0},"generated":{"line":1,"column":1325}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":83,"column":0},"generated":{"line":1,"column":1330}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":83,"column":0},"generated":{"line":1,"column":1332}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":83,"column":0},"generated":{"line":1,"column":1342}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":86,"column":0},"generated":{"line":1,"column":1346}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":86,"column":0},"generated":{"line":1,"column":1352}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":87,"column":0},"generated":{"line":1,"column":1353}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":87,"column":0},"generated":{"line":1,"column":1358}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1360}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1374}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1378}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1380}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1387}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1389}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":88,"column":0},"generated":{"line":1,"column":1391}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1395}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1404}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1406}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1408}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1411}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1417}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":92,"column":0},"generated":{"line":1,"column":1421}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1426}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1432}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1434}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1439}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1444}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1446}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1460}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1463}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1465}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1468}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1470}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1471}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1476}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1478}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1496}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":97,"column":0},"generated":{"line":1,"column":1500}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":97,"column":0},"generated":{"line":1,"column":1504}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":98,"column":0},"generated":{"line":1,"column":1506}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":98,"column":0},"generated":{"line":1,"column":1513}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1515}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":99,"column":0},"generated":{"line":1,"column":1520}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1523}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1525}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1570}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":102,"column":0},"generated":{"line":1,"column":1573}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":103,"column":0},"generated":{"line":1,"column":1577}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":103,"column":0},"generated":{"line":1,"column":1579}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":103,"column":0},"generated":{"line":1,"column":1591}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":103,"column":0},"generated":{"line":1,"column":1593}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":105,"column":0},"generated":{"line":1,"column":1596}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":105,"column":0},"generated":{"line":1,"column":1602}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1605}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1612}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1614}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1632}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1637}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1645}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1652}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1656}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1663}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1665}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1683}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1688}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1690}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1700}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1702}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":108,"column":0},"generated":{"line":1,"column":1704}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":112,"column":0},"generated":{"line":1,"column":1710}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":112,"column":0},"generated":{"line":1,"column":1719}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":112,"column":0},"generated":{"line":1,"column":1721}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":112,"column":0},"generated":{"line":1,"column":1723}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":113,"column":0},"generated":{"line":1,"column":1726}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":113,"column":0},"generated":{"line":1,"column":1732}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":113,"column":0},"generated":{"line":1,"column":1734}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1737}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1741}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1747}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":114,"column":0},"generated":{"line":1,"column":1752}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":115,"column":0},"generated":{"line":1,"column":1754}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":115,"column":0},"generated":{"line":1,"column":1756}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":115,"column":0},"generated":{"line":1,"column":1759}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":115,"column":0},"generated":{"line":1,"column":1761}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":115,"column":0},"generated":{"line":1,"column":1763}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":117,"column":0},"generated":{"line":1,"column":1766}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":117,"column":0},"generated":{"line":1,"column":1773}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":111,"column":0},"generated":{"line":1,"column":1775}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":111,"column":0},"generated":{"line":1,"column":1783}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":111,"column":0},"generated":{"line":1,"column":1803}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":119,"column":0},"generated":{"line":1,"column":1805}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":119,"column":0},"generated":{"line":1,"column":1813}},{"source":"../node_modules/threads/dist/master/invocation-proxy.js","original":{"line":119,"column":0},"generated":{"line":1,"column":1831}}],"sources":{"../node_modules/threads/dist/master/invocation-proxy.js":"\"use strict\";\n/*\n * This source file contains the code for proxying calls in the master thread to calls in the workers\n * by `.postMessage()`-ing.\n *\n * Keep in mind that this code can make or break the program's performance! Need to optimize more…\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst common_1 = require(\"../common\");\nconst observable_promise_1 = require(\"../observable-promise\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nlet nextJobUID = 1;\nconst dedupe = (array) => Array.from(new Set(array));\nconst isJobErrorMessage = (data) => data && data.type === messages_1.WorkerMessageType.error;\nconst isJobResultMessage = (data) => data && data.type === messages_1.WorkerMessageType.result;\nconst isJobStartMessage = (data) => data && data.type === messages_1.WorkerMessageType.running;\nfunction createObservableForJob(worker, jobUID) {\n    return new observable_fns_1.Observable(observer => {\n        let asyncType;\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker:\", event.data);\n            if (!event.data || event.data.uid !== jobUID)\n                return;\n            if (isJobStartMessage(event.data)) {\n                asyncType = event.data.resultType;\n            }\n            else if (isJobResultMessage(event.data)) {\n                if (asyncType === \"promise\") {\n                    if (typeof event.data.payload !== \"undefined\") {\n                        observer.next(common_1.deserialize(event.data.payload));\n                    }\n                    observer.complete();\n                    worker.removeEventListener(\"message\", messageHandler);\n                }\n                else {\n                    if (event.data.payload) {\n                        observer.next(common_1.deserialize(event.data.payload));\n                    }\n                    if (event.data.complete) {\n                        observer.complete();\n                        worker.removeEventListener(\"message\", messageHandler);\n                    }\n                }\n            }\n            else if (isJobErrorMessage(event.data)) {\n                const error = common_1.deserialize(event.data.error);\n                if (asyncType === \"promise\" || !asyncType) {\n                    observer.error(error);\n                }\n                else {\n                    observer.error(error);\n                }\n                worker.removeEventListener(\"message\", messageHandler);\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        return () => worker.removeEventListener(\"message\", messageHandler);\n    });\n}\nfunction prepareArguments(rawArgs) {\n    if (rawArgs.length === 0) {\n        // Exit early if possible\n        return {\n            args: [],\n            transferables: []\n        };\n    }\n    const args = [];\n    const transferables = [];\n    for (const arg of rawArgs) {\n        if (transferable_1.isTransferDescriptor(arg)) {\n            args.push(common_1.serialize(arg.send));\n            transferables.push(...arg.transferables);\n        }\n        else {\n            args.push(common_1.serialize(arg));\n        }\n    }\n    return {\n        args,\n        transferables: transferables.length === 0 ? transferables : dedupe(transferables)\n    };\n}\nfunction createProxyFunction(worker, method) {\n    return ((...rawArgs) => {\n        const uid = nextJobUID++;\n        const { args, transferables } = prepareArguments(rawArgs);\n        const runMessage = {\n            type: messages_1.MasterMessageType.run,\n            uid,\n            method,\n            args\n        };\n        debugMessages(\"Sending command to run function to worker:\", runMessage);\n        try {\n            worker.postMessage(runMessage, transferables);\n        }\n        catch (error) {\n            return observable_promise_1.ObservablePromise.from(Promise.reject(error));\n        }\n        return observable_promise_1.ObservablePromise.from(observable_fns_1.multicast(createObservableForJob(worker, uid)));\n    });\n}\nexports.createProxyFunction = createProxyFunction;\nfunction createProxyModule(worker, methodNames) {\n    const proxy = {};\n    for (const methodName of methodNames) {\n        proxy[methodName] = createProxyFunction(worker, methodName);\n    }\n    return proxy;\n}\nexports.createProxyModule = createProxyModule;\n"},"lineCount":null}},"error":null,"hash":"7aef4f8b5225cb2f19ab1605270da0e6","cacheData":{"env":{}}}