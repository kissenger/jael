{"id":"NgdC","dependencies":[{"name":"/home/travis/build/geotiffjs/geotiff.js/package.json","includedInParent":true,"mtime":1586203732493},{"name":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/package.json","includedInParent":true,"mtime":1585135691692},{"name":"./observable","loc":{"line":1,"column":23},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/multicast.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/observable.js"},{"name":"./subject","loc":{"line":2,"column":20},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/multicast.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/subject.js"},{"name":"./unsubscribe","loc":{"line":3,"column":24},"parent":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/multicast.js","resolved":"/home/travis/build/geotiffjs/geotiff.js/node_modules/observable-fns/dist.esm/unsubscribe.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=t(require(\"./observable\")),r=t(require(\"./subject\")),u=t(require(\"./unsubscribe\"));function t(e){return e&&e.__esModule?e:{default:e}}function s(t){const s=new r.default;let n,i=0;return new e.default(e=>{n||(n=t.subscribe(s));const r=s.subscribe(e);return i++,()=>{i--,r.unsubscribe(),0===i&&((0,u.default)(n),n=void 0)}})}var n=s;exports.default=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":0}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":13}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":20}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":35}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":43}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":56}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":57}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":64}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":68}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":76}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":89}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":2,"column":0},"generated":{"line":1,"column":124}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":2,"column":0},"generated":{"line":1,"column":126}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":2,"column":0},"generated":{"line":1,"column":136}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":3,"column":0},"generated":{"line":1,"column":150}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":3,"column":0},"generated":{"line":1,"column":152}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":3,"column":0},"generated":{"line":1,"column":154}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":3,"column":0},"generated":{"line":1,"column":162}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":180}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":189}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":191}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":194}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":201}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":204}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":206}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":217}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":219}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":220}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":228}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":22,"column":0},"generated":{"line":1,"column":231}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":22,"column":9},"generated":{"line":1,"column":240}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"coldObservable","original":{"line":22,"column":19},"generated":{"line":1,"column":242}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subject","original":{"line":23,"column":10},"generated":{"line":1,"column":245}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subject","original":{"line":23,"column":10},"generated":{"line":1,"column":251}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":23,"column":20},"generated":{"line":1,"column":253}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"Subject","original":{"line":23,"column":24},"generated":{"line":1,"column":257}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":23,"column":20},"generated":{"line":1,"column":259}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":24,"column":8},"generated":{"line":1,"column":267}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":24,"column":8},"generated":{"line":1,"column":271}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscriberCount","original":{"line":25,"column":8},"generated":{"line":1,"column":273}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":25,"column":26},"generated":{"line":1,"column":275}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":26,"column":11},"generated":{"line":1,"column":277}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":26,"column":11},"generated":{"line":1,"column":284}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"Observable","original":{"line":26,"column":15},"generated":{"line":1,"column":288}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":26,"column":11},"generated":{"line":1,"column":290}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"observer","original":{"line":26,"column":26},"generated":{"line":1,"column":298}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":28,"column":13},"generated":{"line":1,"column":302}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":29,"column":12},"generated":{"line":1,"column":306}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"coldObservable","original":{"line":29,"column":33},"generated":{"line":1,"column":308}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscribe","original":{"line":29,"column":48},"generated":{"line":1,"column":310}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subject","original":{"line":29,"column":58},"generated":{"line":1,"column":320}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscription","original":{"line":32,"column":14},"generated":{"line":1,"column":324}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscription","original":{"line":32,"column":14},"generated":{"line":1,"column":330}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subject","original":{"line":32,"column":29},"generated":{"line":1,"column":332}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscribe","original":{"line":32,"column":37},"generated":{"line":1,"column":334}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"observer","original":{"line":32,"column":47},"generated":{"line":1,"column":344}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":34,"column":15},"generated":{"line":1,"column":347}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscriberCount","original":{"line":33,"column":8},"generated":{"line":1,"column":354}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":34,"column":15},"generated":{"line":1,"column":358}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscriberCount","original":{"line":35,"column":12},"generated":{"line":1,"column":363}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscription","original":{"line":36,"column":12},"generated":{"line":1,"column":367}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"unsubscribe","original":{"line":36,"column":25},"generated":{"line":1,"column":369}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","original":{"line":38,"column":36},"generated":{"line":1,"column":383}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"subscriberCount","original":{"line":38,"column":16},"generated":{"line":1,"column":387}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":39,"column":28},"generated":{"line":1,"column":392}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":39,"column":28},"generated":{"line":1,"column":394}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":39,"column":28},"generated":{"line":1,"column":396}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":39,"column":28},"generated":{"line":1,"column":405}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"sourceSubscription","original":{"line":40,"column":16},"generated":{"line":1,"column":408}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"undefined","original":{"line":40,"column":37},"generated":{"line":1,"column":415}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":421}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":425}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":427}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":429}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":437}},{"source":"../node_modules/observable-fns/dist.esm/multicast.js","name":"multicast","original":{"line":45,"column":15},"generated":{"line":1,"column":445}}],"sources":{"../node_modules/observable-fns/dist.esm/multicast.js":"import Observable from \"./observable\";\nimport Subject from \"./subject\";\nimport unsubscribe from \"./unsubscribe\";\n// TODO: Subject already creates additional observables \"under the hood\",\n//       now we introduce even more. A true native MulticastObservable\n//       would be preferable.\n/**\n * Takes a \"cold\" observable and returns a wrapping \"hot\" observable that\n * proxies the input observable's values and errors.\n *\n * An observable is called \"cold\" when its initialization function is run\n * for each new subscriber. This is how observable-fns's `Observable`\n * implementation works.\n *\n * A hot observable is an observable where new subscribers subscribe to\n * the upcoming values of an already-initialiazed observable.\n *\n * The multicast observable will lazily subscribe to the source observable\n * once it has its first own subscriber and will unsubscribe from the\n * source observable when its last own subscriber unsubscribed.\n */\nfunction multicast(coldObservable) {\n    const subject = new Subject();\n    let sourceSubscription;\n    let subscriberCount = 0;\n    return new Observable(observer => {\n        // Init source subscription lazily\n        if (!sourceSubscription) {\n            sourceSubscription = coldObservable.subscribe(subject);\n        }\n        // Pipe all events from `subject` into this observable\n        const subscription = subject.subscribe(observer);\n        subscriberCount++;\n        return () => {\n            subscriberCount--;\n            subscription.unsubscribe();\n            // Close source subscription once last subscriber has unsubscribed\n            if (subscriberCount === 0) {\n                unsubscribe(sourceSubscription);\n                sourceSubscription = undefined;\n            }\n        };\n    });\n}\nexport default multicast;\n"},"lineCount":null}},"error":null,"hash":"7e9a2ec06a283e802e69d045823b412b","cacheData":{"env":{}}}